import os
import glob

@tool
def compute_scores_for_df(
    csv_path: str,
    output_path: str,
    llm_as_judge_prompt: str,
    rai_model_name: str,
    rai_wrapper_name: str,
    llm_as_judge_gen_model_kwargs: dict,
    qstn_col="Question",
    col_generated_ans="finetuned_response",
    gndth_col="Answer"
) -> str:
    """
    Auto-detect CSV from promptflow folder if path is missing.
    """

    # Step 1: If no csv_path given, look in ./promptflow folder
    if not csv_path or csv_path.strip() == "":
        base_path = os.getcwd()
        promptflow_path = os.path.join(base_path, "promptflow")

        print(f"[INFO] No CSV path provided. Looking for CSV in: {promptflow_path}")

        csv_files = glob.glob(os.path.join(promptflow_path, "*.csv"))
        if not csv_files:
            raise FileNotFoundError("No CSV file found in ./promptflow folder.")

        csv_path = csv_files[0]
        print(f"[INFO] Auto-detected CSV file: {csv_path}")

    # Step 2: Load CSV and run evaluation
    df_results = pd.read_csv(csv_path)
    ...

